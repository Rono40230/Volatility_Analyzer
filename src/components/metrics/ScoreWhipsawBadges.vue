<template>
  <!-- Score & Whipsaw Blocs -->
  <div style="display: flex; gap: 12px; align-items: center;">
    <!-- Score Bloc -->
    <MetricTooltip
      title="Score"
      direction="bottom"
      style="max-width: 250px;"
    >
      <div style="flex: 0 0 auto; padding: 12px 16px; background: rgba(45, 90, 123, 0.15); border: 1px solid #2d5a7b; border-radius: 6px; font-size: 12px; min-width: 140px;">
        <div style="color: #64a5d8; margin-bottom: 6px; font-weight: bold;">
          â­ SCORE
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="font-size: 18px; font-weight: bold;" :style="{ color: getScoreColor(score) }">
            {{ score.toFixed(0) }}/100
          </div>
        </div>
      </div>
      <template #definition>
        <div class="tooltip-section">
          <div class="tooltip-section-title">ğŸ“– DÃ©finition</div>
          <div class="tooltip-section-text">Score de viabilitÃ© du Straddle ajustÃ© par la frÃ©quence whipsaw. ReflÃ¨te la qualitÃ© rÃ©elle du setup en tenant compte des retournements.</div>
        </div>
      </template>
      <template #interpretation>
        <div class="tooltip-section">
          <div class="tooltip-section-title">ğŸ“Š InterprÃ©tation</div>
          <div class="interpretation-item"><strong>ğŸŸ¢ Excellent:</strong> â‰¥75/100 â†’ Setup optimal</div>
          <div class="interpretation-item"><strong>ğŸ”µ Bon:</strong> 60-74/100 â†’ Setup viable</div>
          <div class="interpretation-item"><strong>ğŸŸ¡ Acceptable:</strong> 45-59/100 â†’ Ã€ considÃ©rer</div>
          <div class="interpretation-item"><strong>ğŸ”´ Faible:</strong> &lt;45/100 â†’ Ã€ Ã©viter</div>
        </div>
      </template>
    </MetricTooltip>

    <!-- FrÃ©quence Whipsaw -->
    <MetricTooltip
      title="FrÃ©quence Whipsaw"
      direction="bottom"
    >
      <div style="flex: 0 0 auto; padding: 12px 16px; background: rgba(45, 90, 123, 0.15); border: 1px solid #2d5a7b; border-radius: 6px; font-size: 12px; min-width: 160px;">
        <div style="color: #64a5d8; margin-bottom: 6px; font-weight: bold;">
          ğŸ“Š WHIPSAW
        </div>
        <div style="display: flex; align-items: center; gap: 8px;">
          <div style="font-size: 18px; font-weight: bold;" :style="{ color: getWhipsawColor(whipsawFrequency) }">
            {{ whipsawFrequency.toFixed(1) }}%
          </div>
        </div>
      </div>
      <template #definition>
        <div class="tooltip-section">
          <div class="tooltip-section-title">ğŸ“– DÃ©finition</div>
          <div class="tooltip-section-text">FrÃ©quence des retournements rapides (whipsaws) dans le quarter. Mesure la volatilitÃ© et l'instabilitÃ© du mouvement.</div>
        </div>
      </template>
      <template #interpretation>
        <div class="tooltip-section">
          <div class="tooltip-section-title">ğŸ“Š InterprÃ©tation</div>
          <div class="interpretation-item"><strong>ğŸŸ¢ TrÃ¨s Bas:</strong> &lt;5% â†’ Excellent, trÃ¨s stable</div>
          <div class="interpretation-item"><strong>ğŸ”µ Bas:</strong> 5-10% â†’ Bon, acceptable</div>
          <div class="interpretation-item"><strong>ğŸŸ¡ ModÃ©rÃ©:</strong> 10-20% â†’ Attention requise</div>
          <div class="interpretation-item"><strong>ğŸŸ  Ã‰levÃ©:</strong> 20-30% â†’ RisquÃ©</div>
          <div class="interpretation-item"><strong>ğŸ”´ TrÃ¨s Ã‰levÃ©:</strong> &gt;30% â†’ Ã€ Ã©viter</div>
        </div>
      </template>
    </MetricTooltip>
  </div>
</template>

<script setup lang="ts">
import MetricTooltip from '../MetricTooltip.vue'
import { getScoreColor, getWhipsawColor } from './BestSliceCard.helpers'

defineProps<{
  score: number
  whipsawFrequency: number
}>()
</script>

<style scoped>
.interpretation-item {
  padding: 4px 0;
  font-size: 12px;
}
</style>
