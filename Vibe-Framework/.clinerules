# .clinerules - R√àGLES ABSOLUES POUR AGENT IA
# ‚ö†Ô∏è  √Ä COPIER √Ä LA RACINE DE TOUT NOUVEAU PROJET RUST/VUE ‚ö†Ô∏è
# üìù Note : Certaines r√®gles peuvent √™tre overriden via .vibe/config.toml (ex. allow_console_log)

## üéØ OBJECTIFS DU PROJET (√Ä REMPLIR)
**Consulter `projet.md` pour contexte complet**

**Objectif Principal** : [D√âCRIRE L'OBJECTIF ICI]
**Strat√©gie Cible** : [D√âCRIRE LA STRAT√âGIE ICI]

**Param√®tres Critiques** :
- **[Param√®tre 1]** : [Description]
- **[Param√®tre 2]** : [Description]

**R√®gle d'Or** : Chaque ligne de code doit servir directement [L'OBJECTIF PRINCIPAL].

---

## üìã R√àGLES G√âN√âRALES

### R√àGLE 1 : Identit√© & Philosophie
- **R√¥le** : Expert "Vibe Coding" - UX, esth√©tique, rapidit√©, solidit√©
- **Priorit√©** : R√©sultat visuel/fonctionnel √©quilibr√© avec architecture robuste. Interface Premium, fluide, "Wow effect" + tests unitaires minimaux
- **Communication** : Fran√ßais, collaboratif, orient√© solution

### R√àGLE 2 : Conventions de Nommage (CRITIQUE / VIBEOS)
- **Fonctions & M√©thodes** : Pr√©f√©rer le fran√ßais pour les noms m√©tier, autoriser l'anglais pour les APIs standards
  - ‚úÖ `calculerMoyenne()`, `ouvrirModale()`, `sauvegarderArchive()` (m√©tier)
  - ‚úÖ `calculateAverage()`, `openModal()`, `saveArchive()` (si standard)
- **Variables** : Pr√©f√©rence fran√ßais
- **Coh√©rence** : camelCase pour JS/TS, snake_case pour Rust
- **Commentaires** : Fran√ßais, clairs

### R√àGLE 3 : Int√©grit√© des D√©pendances (Anti-Hallucination)
- **V√©rification** : Avant d'ajouter un `import` ou `use`, V√âRIFIER `package.json` ou `Cargo.toml`.
- **Interdiction** : Ne JAMAIS inventer de d√©pendance ou utiliser une lib non install√©e sans demander l'autorisation explicite d'installation.

### R√àGLE 4 : Stack Technique (Standard Rust/Vue)
- **Frontend** : Vue.js 3 (Composition API `script setup`), TypeScript
- **Backend** : Rust (Tauri)
- **Styling** : CSS Vanilla, Dark Mode, couleurs vibrantes, glassmorphism
- **Architecture** : Modulaire, un fichier/composant, Pinia pour √©tat

### R√àGLE 5 : Workflow IA
1. Comprendre le "Vibe"
2. Planifier (plan d'action clair)
3. Impl√©menter (nommage fran√ßais)
4. Documenter (`task.md`)

### R√àGLE 6 : Gestion Erreurs & UX (CRITIQUE / VIBEOS)

#### üõ°Ô∏è S√õRET√â RUST (Z√©ro Panic)
- **STRICTEMENT INTERDIT** : `unwrap()` sur `Option` ou `Result` en code de production.
- **APPROCHE VALID√âE** :
  - Utiliser `match` ou `if let` pour g√©rer les cas.
  - Utiliser l'op√©rateur `?` pour propager les erreurs proprement.
  - √Ä la limite, utiliser `expect("Message d'erreur contextuel clair")` si le crash est la seule option logique (rare).
- **POURQUOI ?** : L'audit bloque tout commit contenant `unwrap()`. Mieux vaut g√©rer l'erreur maintenant que de casser la CI plus tard.

#### ‚úÇÔ∏è ARCHITECTURE & TAILLE DES FICHIERS (Anti-Monolithe)
- **LIMITE DURE** : 300 lignes par fichier.
- **R√âFLEXE IMM√âDIAT** : Si vous vous approchez de 250 lignes -> REFACTORING OBLIGATOIRE IMM√âDIAT.
- **STRAT√âGIE VUE.JS** :
  - **Logique** : Extraire tout script > 50 lignes dans un composable (`composables/useMaFeature.js`).
  - **UI** : D√©couper les templates en sous-composants (`components/dashboard/ma-feature/SubComponent.vue`).
- **STRAT√âGIE RUST** :
  - Cr√©er des `mod.rs` et sous-modules d√®s qu'une struct a trop de m√©thodes.
  - Un fichier = Une responsabilit√© majeure.

### R√àGLE 7 : Documentation & Tra√ßabilit√©
- Jamais de page blanche/erreur cryptique
- √âtats de chargement (spinners)
- Messages d'erreur conviviaux
- Persistance des donn√©es (ne jamais perdre le travail user)

### R√àGLE 7 : Communication
- **Concision** : R√©ponses courtes et directes
- **Fran√ßais** : Toujours, m√™me pour les termes techniques si possible

### R√àGLE 8 : Responsabilit√© Environnement
- **Pas de compilation automatique** : Attendre ordre explicite utilisateur
- **Toujours v√©rifier** : Rien cass√© apr√®s modification (Non-R√©gression)

---

## üé® R√àGLES FRONTEND (Vue.js)

### R√àGLE 9 : Design Premium & Solidit√©
- **Jamais de placeholders** : Utiliser g√©n√©rateurs si besoin
- **Couleurs** : Riches, pas de couleurs primaires g√©n√©riques (rouge/bleu html)
- **Responsive** : Toujours, Mobile First si pertinent
- **Tests** : Chaque fonctionnalit√© doit inclure au moins un test basique (unit√©/int√©gration)

### R√àGLE 10 : Qualit√© Code Frontend (CRITIQUE)
**Interdictions strictes en production (V√©rifi√©es par VibeOS):**
- ‚ùå `console.log()` : INTERDIT
- ‚ùå `console.error/warn/debug()` : INTERDIT
- ‚ùå `debugger` : INTERDIT
- ‚ùå `alert()` : INTERDIT
- ‚ùå Types `any` : √Ä √âVITER

**Bonnes pratiques:**
- ‚úÖ Types TypeScript explicites
- ‚úÖ Pas de code mort (imports/composants inutilis√©s)
- ‚úÖ Pas d'imports circulaires

### R√àGLE 11 : Modernit√© Vue.js (Uniformit√©)
- **Script Setup** : Usage OBLIGATOIRE de `<script setup lang="ts">`.
- **Interdit** : Pas d'Options API (`export default { data()... }`).
- **Styles** : Toujours `<style scoped>`.

### R√àGLE 12 : S√©curit√© Frontend (Anti-XSS et autres)
- ‚ùå `v-html` : STRICTEMENT INTERDIT (risque XSS √©lev√©).
- ‚ùå Manipulation DOM directe : Pas de `document.getElementById` (utiliser `ref`).
- ‚ùå Injection SQL : √âviter les requ√™tes non param√©tr√©es.
- ‚ùå Manipulation DOM non s√©curis√©e : Pas de `innerHTML` sans sanitisation.

---

## ü¶Ä R√àGLES BACKEND (Rust/Tauri)

### R√àGLE 13 : Auto-V√©rification
L'IA doit s'assurer que le code compile avant de le proposer.
Commande de r√©f√©rence : `cargo check`

### R√àGLE 14 : Commandes Git
L'IA NE mentionne JAMAIS : `git commit`, `git push` (g√©r√© par scripts ou user)

### R√àGLE 15 : Z√©ro Code Mort
Avant g√©n√©ration, analyser et SUPPRIMER :
- Fonctions jamais appel√©es
- Imports inutilis√©s

### R√àGLE 16 : Limites de Taille (Atomic Design)
**Surveill√© par VibeOS Sentinel :**
- Services Rust : < 300 lignes
- Composants Vue : < 250 lignes
- Main.rs : < 120 lignes
Si d√©passe ‚Üí STOP + Refactoring obligatoire.

### R√àGLE 17 : S√ªret√© du Code (Rust)
- ‚ùå `unwrap()`, `unwrap_or()` strictements interdits en prod
- ‚ùå Blocs `unsafe` : INTERDITS (sauf FFI indispensable, avec commentaire justifiant).
- ‚úÖ Utiliser `match`, `if let`, ou `?` pour g√©rer proprement les erreurs

### R√àGLE 18 : Documentation Intentionnelle (RustDoc/JSDoc)
- Toute fonction publique (`pub fn` ou `export const`) DOIT avoir un commentaire d√©crivant son **INTENTION** (le pourquoi, pas le comment).
- Langue : Fran√ßais.

---

## üîÑ PROTOCOLE D'INTERACTION VIBEOS

### R√àGLE 19 : Validation Compr√©hension (OBLIGATOIRE)
AVANT toute ligne de code :

1. **COMPRENDRE** : Reformuler la demande.
2. **PROPOSER** : Lister les fichiers √† modifier et le plan.
3. **ATTENDRE** : Ne pas coder avant le "Go" de l'utilisateur.

### R√àGLE 20 : Le Cycle Vibe (Phase 1 & 2)

**PHASE 1 : ACCUMULATION (Cr√©ation)**
- L'IA code et modifie.
- La Sentinelle (`./vibe`) tourne en fond et signale les erreurs.
- **NE PAS COMMIT**.

**PHASE 2 : VALIDATION (Cl√¥ture)**
- Sur demande "Valide tout".
- Lancer l'Audit Final : `.vibe/bin/audit.sh`
- Si Vert ‚úÖ ‚Üí Commit autoris√©.
- Si Rouge ‚ùå ‚Üí Correction prioritaire.

### R√àGLE 21 : Principe de Chirurgie (Non-Destructif)
- **Conservation** : Ne jamais r√©√©crire un fichier entier si seule une fonction change.
- **Stabilit√©** : Ne pas modifier le code qui fonctionne et qui n'est pas li√© √† la demande actuelle (Pas de "refactoring sauvage").

### R√àGLE 22 : Auto-Correction (Self-Healing Debugging)
- Si une commande (test/build) √©choue :
  1. **Lire l'erreur** (stderr).
  2. **Analyser la cause**.
  3. **Proposer le fix** imm√©diatement.
- Ne jamais laisser le code dans un √©tat "cass√©" sans proposer la solution.
